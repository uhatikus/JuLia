<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Gallery</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
            color: white;
            overflow-x: hidden;
        }

        .gallery-container {
            padding: 20px;
            max-width: 100vw;
        }

        .gallery-grid {
            display: grid;
            gap: 4px;
            width: 100%;
            transition: all 0.3s ease;
        }

        /* Responsive grid layouts */
        @media (max-width: 480px) {
            .gallery-grid {
                grid-template-columns: repeat(1, 1fr);
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .gallery-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (min-width: 1025px) and (max-width: 1440px) {
            .gallery-grid {
                grid-template-columns: repeat(8, 1fr);
            }
        }

        @media (min-width: 1441px) and (max-width: 1920px) {
            .gallery-grid {
                grid-template-columns: repeat(7, 1fr);
            }
        }

        @media (min-width: 1921px) and (max-width: 2560px) {
            .gallery-grid {
                grid-template-columns: repeat(14, 1fr);
            }
        }

        @media (min-width: 2561px) and (max-width: 3440px) {
            .gallery-grid {
                grid-template-columns: repeat(28, 1fr);
            }
        }

        @media (min-width: 3441px) {
            .gallery-grid {
                grid-template-columns: repeat(56, 1fr);
            }
        }

        .photo-tile {
            aspect-ratio: 1;
            cursor: pointer;
            overflow: hidden;
            border-radius: 4px;
            transition: all 0.3s ease;
            background-color: #333;
            position: relative;
        }

        .photo-tile:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
        }

        .photo-tile img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.3s ease;
        }

        /* Special 2x2 tiles */
        .photo-tile.large {
            grid-column: span 2;
            grid-row: span 2;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            max-width: 90%;
            max-height: 90%;
            border-radius: 8px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .modal img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 8px;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            z-index: 1001;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .close-modal:hover {
            color: #ff6b6b;
        }

        .audio-indicator {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 50vh;
            font-size: 18px;
            color: #888;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .playing .audio-indicator {
            animation: pulse 1s infinite;
            background: #ff6b6b;
        }
    </style>
</head>

<body>
    <div class="gallery-container">
        <div class="loading" id="loading">Loading photos...</div>
        <div class="gallery-grid" id="gallery" style="display: none;"></div>
    </div>

    <!-- Modal for full-size image -->
    <div class="modal" id="modal">
        <span class="close-modal" id="closeModal">&times;</span>
        <div class="modal-content">
            <img id="modalImage" src="" alt="">
        </div>
    </div>

    <audio id="audioPlayer" preload="none"></audio>

    <script>
        class PhotoGallery {
            constructor() {
                this.photos = [];
                this.currentAudio = null;
                this.modal = document.getElementById('modal');
                this.modalImage = document.getElementById('modalImage');
                this.audioPlayer = document.getElementById('audioPlayer');
                this.gallery = document.getElementById('gallery');
                this.loading = document.getElementById('loading');

                this.init();
            }

            async init() {
                await this.generatePhotoList();
                this.renderGallery();
                this.setupEventListeners();
                this.hideLoading();
            }

            async generatePhotoList() {
                // Generate list of 50 photos
                // You'll need to replace this with your actual photo names
                const photoExtensions = ['jpg', 'jpeg', 'png', 'webp'];

                for (let i = 1; i <= 50; i++) {
                    // Try different extensions for each photo
                    let photoFound = false;
                    for (const ext of photoExtensions) {
                        const photoName = `photo${i.toString().padStart(2, '0')}.${ext}`;
                        this.photos.push({
                            name: photoName,
                            path: `photos/${photoName}`,
                            audioPath: `audio/photo${i.toString().padStart(2, '0')}.m4a`,
                            isLarge: i === 10 || i === 25 // Make photos 10 and 25 the large 2x2 tiles
                        });
                        break;
                    }
                }
            }

            renderGallery() {
                let html = '';

                this.photos.forEach((photo, index) => {
                    const largeClass = photo.isLarge ? 'large' : '';
                    html += `
                        <div class="photo-tile ${largeClass}" data-index="${index}">
                            <img src="${photo.path}" alt="Photo ${index + 1}" loading="lazy" 
                                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMzMzIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg=='">
                            <div class="audio-indicator">â™ª</div>
                        </div>
                    `;
                });

                this.gallery.innerHTML = html;
            }

            setupEventListeners() {
                // Photo click events
                this.gallery.addEventListener('click', (e) => {
                    const tile = e.target.closest('.photo-tile');
                    if (tile) {
                        const index = parseInt(tile.dataset.index);
                        this.openModal(index);
                    }
                });

                // Modal close events
                document.getElementById('closeModal').addEventListener('click', () => {
                    this.closeModal();
                });

                this.modal.addEventListener('click', (e) => {
                    if (e.target === this.modal) {
                        this.closeModal();
                    }
                });

                // Keyboard events
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.closeModal();
                    }
                });

                // Audio events
                this.audioPlayer.addEventListener('ended', () => {
                    this.stopAudio();
                });

                this.audioPlayer.addEventListener('error', () => {
                    console.log('Audio file not found or cannot be played');
                });
            }

            openModal(index) {
                const photo = this.photos[index];
                this.modalImage.src = photo.path;
                this.modal.classList.add('active');
                document.body.style.overflow = 'hidden';

                // Play audio
                this.playAudio(photo.audioPath, index);
            }

            closeModal() {
                this.modal.classList.remove('active');
                document.body.style.overflow = 'auto';
                this.stopAudio();
            }

            playAudio(audioPath, index) {
                this.stopAudio(); // Stop any currently playing audio

                this.audioPlayer.src = audioPath;
                this.audioPlayer.play().then(() => {
                    this.currentAudio = index;
                    this.updatePlayingIndicator(index, true);
                }).catch((error) => {
                    console.log('Could not play audio:', error);
                });
            }

            stopAudio() {
                if (this.currentAudio !== null) {
                    this.updatePlayingIndicator(this.currentAudio, false);
                    this.currentAudio = null;
                }
                this.audioPlayer.pause();
                this.audioPlayer.currentTime = 0;
            }

            updatePlayingIndicator(index, isPlaying) {
                const tile = document.querySelector(`[data-index="${index}"]`);
                if (tile) {
                    if (isPlaying) {
                        tile.classList.add('playing');
                    } else {
                        tile.classList.remove('playing');
                    }
                }
            }

            hideLoading() {
                this.loading.style.display = 'none';
                this.gallery.style.display = 'grid';
            }
        }

        // Initialize the gallery when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new PhotoGallery();
        });
    </script>
</body>

</html>